package de.whs.homebaconcore;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

/**
 * Created by pausf on 05.01.2016.
 */
public class PredictionModel {

    private float accuracy;
    private float minRssi = -106.0f;
    private float maxRssi = -40.0f;
    private float[][] W;
    private float[] b;
    private Map<String, Integer> rooms = new HashMap<>();
    private Map<String, Integer> tags = new HashMap<>();

    public static String getTestData() {
        return  "scan_id,room_id,tag,rssi\n" +
                "1,3,7C:2F:80:99:DE:B1,-83\n" +
                "2,3,7C:2F:80:99:DE:B1,-85\n" +
                "3,3,7C:2F:80:99:DE:B1,-85\n" +
                "4,3,7C:2F:80:99:DE:B1,-83\n" +
                "5,3,7C:2F:80:99:DE:CD,-95\n" +
                "6,3,7C:2F:80:99:DE:CD,-96\n" +
                "6,3,7C:2F:80:99:DE:25,-92\n" +
                "7,3,7C:2F:80:99:DE:CD,-96\n" +
                "7,3,7C:2F:80:99:DE:25,-92\n" +
                "7,3,7C:2F:80:99:DE:B1,-77\n" +
                "8,3,7C:2F:80:99:DE:CD,-97\n" +
                "8,3,7C:2F:80:99:DE:25,-96\n" +
                "8,3,7C:2F:80:99:DE:B1,-77\n" +
                "9,3,7C:2F:80:99:DE:CD,-98\n" +
                "9,3,7C:2F:80:99:DE:25,-88\n" +
                "9,3,7C:2F:80:99:DE:B1,-90\n" +
                "10,3,7C:2F:80:99:DE:CD,-92\n" +
                "10,3,7C:2F:80:99:DE:25,-88\n" +
                "11,3,7C:2F:80:99:DE:70,-95\n" +
                "12,3,7C:2F:80:99:DE:70,-95\n" +
                "13,3,7C:2F:80:99:DE:70,-94\n" +
                "14,3,7C:2F:80:99:DE:25,-91\n" +
                "15,3,7C:2F:80:99:DE:25,-86\n" +
                "15,3,7C:2F:80:99:DE:B1,-84\n" +
                "16,3,7C:2F:80:99:DE:25,-86\n" +
                "16,3,7C:2F:80:99:DE:B1,-84\n" +
                "16,3,7C:2F:80:99:DE:70,-94\n" +
                "17,3,7C:2F:80:99:DE:CD,-100\n" +
                "17,3,7C:2F:80:99:DE:70,-85\n" +
                "18,3,7C:2F:80:99:DE:CD,-100\n" +
                "18,3,7C:2F:80:99:DE:B1,-92\n" +
                "18,3,7C:2F:80:99:DE:70,-86\n" +
                "19,3,7C:2F:80:99:DE:CD,-93\n" +
                "19,3,7C:2F:80:99:DE:B1,-92\n" +
                "19,3,7C:2F:80:99:DE:70,-86\n" +
                "20,3,7C:2F:80:99:DE:CD,-93\n" +
                "20,3,7C:2F:80:99:DE:25,-94\n" +
                "20,3,7C:2F:80:99:DE:B1,-87\n" +
                "20,3,7C:2F:80:99:DE:70,-97\n" +
                "21,3,7C:2F:80:99:DE:25,-94\n" +
                "21,3,7C:2F:80:99:DE:B1,-87\n" +
                "21,3,7C:2F:80:99:DE:70,-97\n" +
                "22,3,7C:2F:80:99:DE:CD,-99\n" +
                "22,3,7C:2F:80:99:DE:25,-92\n" +
                "22,3,7C:2F:80:99:DE:70,-94\n" +
                "23,3,7C:2F:80:99:DE:CD,-99\n" +
                "23,3,7C:2F:80:99:DE:25,-94\n" +
                "23,3,7C:2F:80:99:DE:B1,-88\n" +
                "23,3,7C:2F:80:99:DE:70,-96\n" +
                "24,3,7C:2F:80:99:DE:25,-83\n" +
                "24,3,7C:2F:80:99:DE:B1,-86\n" +
                "24,3,7C:2F:80:99:DE:70,-96\n" +
                "25,3,7C:2F:80:99:DE:CD,-97\n" +
                "25,3,7C:2F:80:99:DE:25,-88\n" +
                "25,3,7C:2F:80:99:DE:B1,-90\n" +
                "25,3,7C:2F:80:99:DE:70,-93\n" +
                "26,3,7C:2F:80:99:DE:CD,-96\n" +
                "26,3,7C:2F:80:99:DE:25,-83\n" +
                "26,3,7C:2F:80:99:DE:B1,-80\n" +
                "26,3,7C:2F:80:99:DE:70,-93\n" +
                "27,3,7C:2F:80:99:DE:CD,-96\n" +
                "27,3,7C:2F:80:99:DE:25,-85\n" +
                "27,3,7C:2F:80:99:DE:B1,-83\n" +
                "27,3,7C:2F:80:99:DE:70,-87\n" +
                "28,3,7C:2F:80:99:DE:CD,-96\n" +
                "28,3,7C:2F:80:99:DE:25,-85\n" +
                "28,3,7C:2F:80:99:DE:B1,-83\n" +
                "28,3,7C:2F:80:99:DE:70,-87\n" +
                "29,3,7C:2F:80:99:DE:CD,-88\n" +
                "29,3,7C:2F:80:99:DE:25,-85\n" +
                "30,3,7C:2F:80:99:DE:CD,-88\n" +
                "30,3,7C:2F:80:99:DE:25,-77\n" +
                "30,3,7C:2F:80:99:DE:B1,-87\n" +
                "31,3,7C:2F:80:99:DE:25,-77\n" +
                "31,3,7C:2F:80:99:DE:B1,-87\n" +
                "31,3,7C:2F:80:99:DE:70,-90\n" +
                "32,3,7C:2F:80:99:DE:25,-73\n" +
                "32,3,7C:2F:80:99:DE:B1,-90\n" +
                "32,3,7C:2F:80:99:DE:70,-92\n" +
                "33,3,7C:2F:80:99:DE:25,-79\n" +
                "33,3,7C:2F:80:99:DE:B1,-90\n" +
                "33,3,7C:2F:80:99:DE:70,-102\n" +
                "34,3,7C:2F:80:99:DE:25,-78\n" +
                "34,3,7C:2F:80:99:DE:B1,-87\n" +
                "34,3,7C:2F:80:99:DE:70,-91\n" +
                "35,3,7C:2F:80:99:DE:25,-77\n" +
                "35,3,7C:2F:80:99:DE:B1,-92\n" +
                "35,3,7C:2F:80:99:DE:70,-94\n" +
                "36,3,7C:2F:80:99:DE:25,-77\n" +
                "36,3,7C:2F:80:99:DE:B1,-99\n" +
                "37,3,7C:2F:80:99:DE:25,-87\n" +
                "37,3,7C:2F:80:99:DE:B1,-87\n" +
                "38,3,7C:2F:80:99:DE:25,-77\n" +
                "38,3,7C:2F:80:99:DE:B1,-95\n" +
                "39,3,7C:2F:80:99:DE:25,-74\n" +
                "39,3,7C:2F:80:99:DE:B1,-95\n" +
                "39,3,7C:2F:80:99:DE:70,-93\n" +
                "40,3,7C:2F:80:99:DE:25,-80\n" +
                "40,3,7C:2F:80:99:DE:70,-93\n" +
                "41,3,7C:2F:80:99:DE:25,-81\n" +
                "42,3,7C:2F:80:99:DE:25,-81\n" +
                "42,3,7C:2F:80:99:DE:B1,-87\n" +
                "43,3,7C:2F:80:99:DE:CD,-95\n" +
                "43,3,7C:2F:80:99:DE:25,-90\n" +
                "43,3,7C:2F:80:99:DE:B1,-84\n" +
                "43,3,7C:2F:80:99:DE:70,-87\n" +
                "44,3,7C:2F:80:99:DE:CD,-90\n" +
                "44,3,7C:2F:80:99:DE:25,-90\n" +
                "44,3,7C:2F:80:99:DE:B1,-84\n" +
                "44,3,7C:2F:80:99:DE:70,-86\n" +
                "45,3,7C:2F:80:99:DE:CD,-88\n" +
                "45,3,7C:2F:80:99:DE:B1,-81\n" +
                "45,3,7C:2F:80:99:DE:70,-89\n" +
                "46,3,7C:2F:80:99:DE:CD,-98\n" +
                "46,3,7C:2F:80:99:DE:25,-91\n" +
                "46,3,7C:2F:80:99:DE:B1,-81\n" +
                "46,3,7C:2F:80:99:DE:70,-90\n" +
                "47,3,7C:2F:80:99:DE:CD,-98\n" +
                "47,3,7C:2F:80:99:DE:25,-91\n" +
                "47,3,7C:2F:80:99:DE:B1,-95\n" +
                "47,3,7C:2F:80:99:DE:70,-87\n" +
                "48,3,7C:2F:80:99:DE:CD,-90\n" +
                "48,3,7C:2F:80:99:DE:25,-85\n" +
                "48,3,7C:2F:80:99:DE:B1,-84\n" +
                "48,3,7C:2F:80:99:DE:70,-83\n" +
                "49,3,7C:2F:80:99:DE:CD,-93\n" +
                "49,3,7C:2F:80:99:DE:25,-85\n" +
                "49,3,7C:2F:80:99:DE:B1,-84\n" +
                "49,3,7C:2F:80:99:DE:70,-97\n" +
                "50,3,7C:2F:80:99:DE:CD,-104\n" +
                "50,3,7C:2F:80:99:DE:70,-101\n" +
                "51,3,7C:2F:80:99:DE:CD,-104\n" +
                "51,3,7C:2F:80:99:DE:25,-85\n" +
                "51,3,7C:2F:80:99:DE:70,-101\n" +
                "52,3,7C:2F:80:99:DE:CD,-92\n" +
                "52,3,7C:2F:80:99:DE:25,-85\n" +
                "52,3,7C:2F:80:99:DE:70,-99\n" +
                "53,3,7C:2F:80:99:DE:B1,-91\n" +
                "53,3,7C:2F:80:99:DE:70,-99\n" +
                "54,3,7C:2F:80:99:DE:25,-81\n" +
                "54,3,7C:2F:80:99:DE:B1,-84\n" +
                "55,3,7C:2F:80:99:DE:CD,-94\n" +
                "55,3,7C:2F:80:99:DE:25,-81\n" +
                "55,3,7C:2F:80:99:DE:B1,-84\n" +
                "56,3,7C:2F:80:99:DE:CD,-94\n" +
                "56,3,7C:2F:80:99:DE:25,-83\n" +
                "56,3,7C:2F:80:99:DE:B1,-80\n" +
                "56,3,7C:2F:80:99:DE:70,-95\n" +
                "57,3,7C:2F:80:99:DE:25,-97\n" +
                "57,3,7C:2F:80:99:DE:B1,-80\n" +
                "58,3,7C:2F:80:99:DE:25,-97\n" +
                "58,3,7C:2F:80:99:DE:B1,-85\n" +
                "59,3,7C:2F:80:99:DE:25,-82\n" +
                "59,3,7C:2F:80:99:DE:B1,-80\n" +
                "60,3,7C:2F:80:99:DE:CD,-93\n" +
                "60,3,7C:2F:80:99:DE:25,-82\n" +
                "60,3,7C:2F:80:99:DE:B1,-80\n" +
                "60,3,7C:2F:80:99:DE:70,-92\n" +
                "61,3,7C:2F:80:99:DE:CD,-93\n" +
                "61,3,7C:2F:80:99:DE:70,-92\n" +
                "62,3,7C:2F:80:99:DE:B1,-78\n" +
                "63,3,7C:2F:80:99:DE:25,-82\n" +
                "63,3,7C:2F:80:99:DE:B1,-89\n" +
                "63,3,7C:2F:80:99:DE:70,-101\n" +
                "64,3,7C:2F:80:99:DE:25,-82\n" +
                "64,3,7C:2F:80:99:DE:B1,-89\n" +
                "64,3,7C:2F:80:99:DE:70,-97\n" +
                "65,3,7C:2F:80:99:DE:25,-85\n" +
                "65,3,7C:2F:80:99:DE:B1,-80\n" +
                "65,3,7C:2F:80:99:DE:70,-97\n" +
                "66,3,7C:2F:80:99:DE:25,-86\n" +
                "66,3,7C:2F:80:99:DE:B1,-91\n" +
                "66,3,7C:2F:80:99:DE:70,-96\n" +
                "67,3,7C:2F:80:99:DE:CD,-90\n" +
                "67,3,7C:2F:80:99:DE:25,-93\n" +
                "67,3,7C:2F:80:99:DE:B1,-91\n" +
                "68,3,7C:2F:80:99:DE:CD,-92\n" +
                "68,3,7C:2F:80:99:DE:25,-93\n" +
                "68,3,7C:2F:80:99:DE:70,-91\n" +
                "69,3,7C:2F:80:99:DE:CD,-92\n" +
                "69,3,7C:2F:80:99:DE:25,-93\n" +
                "69,3,7C:2F:80:99:DE:B1,-86\n" +
                "69,3,7C:2F:80:99:DE:70,-91\n" +
                "70,3,7C:2F:80:99:DE:CD,-92\n" +
                "70,3,7C:2F:80:99:DE:25,-92\n" +
                "70,3,7C:2F:80:99:DE:B1,-92\n" +
                "70,3,7C:2F:80:99:DE:70,-85\n" +
                "71,3,7C:2F:80:99:DE:CD,-92\n" +
                "71,3,7C:2F:80:99:DE:25,-92\n" +
                "71,3,7C:2F:80:99:DE:B1,-95\n" +
                "71,3,7C:2F:80:99:DE:70,-98\n" +
                "72,3,7C:2F:80:99:DE:25,-100\n" +
                "72,3,7C:2F:80:99:DE:B1,-90\n" +
                "72,3,7C:2F:80:99:DE:70,-84\n" +
                "73,3,7C:2F:80:99:DE:88,-97\n" +
                "73,3,7C:2F:80:99:DE:25,-100\n" +
                "73,3,7C:2F:80:99:DE:B1,-90\n" +
                "73,3,7C:2F:80:99:DE:70,-86\n" +
                "73,3,7C:2F:80:99:DE:CD,-87\n" +
                "74,3,7C:2F:80:99:DE:70,-86\n" +
                "75,3,7C:2F:80:99:DE:70,-91\n" +
                "76,3,7C:2F:80:99:DE:B1,-88\n" +
                "76,3,7C:2F:80:99:DE:70,-83\n" +
                "76,3,7C:2F:80:99:DE:CD,-97\n" +
                "77,3,7C:2F:80:99:DE:25,-84\n" +
                "77,3,7C:2F:80:99:DE:B1,-81\n" +
                "77,3,7C:2F:80:99:DE:70,-91\n" +
                "77,3,7C:2F:80:99:DE:CD,-93\n" +
                "78,3,7C:2F:80:99:DE:25,-84\n" +
                "78,3,7C:2F:80:99:DE:B1,-87\n" +
                "78,3,7C:2F:80:99:DE:70,-91\n" +
                "78,3,7C:2F:80:99:DE:CD,-87\n" +
                "79,3,7C:2F:80:99:DE:25,-92\n" +
                "79,3,7C:2F:80:99:DE:B1,-87\n" +
                "79,3,7C:2F:80:99:DE:CD,-87\n" +
                "80,3,7C:2F:80:99:DE:25,-92\n" +
                "81,3,7C:2F:80:99:DE:B1,-82\n" +
                "82,3,7C:2F:80:99:DE:25,-100\n" +
                "82,3,7C:2F:80:99:DE:B1,-82\n" +
                "83,3,7C:2F:80:99:DE:25,-87\n" +
                "83,3,7C:2F:80:99:DE:B1,-78\n" +
                "84,3,7C:2F:80:99:DE:25,-86\n" +
                "84,3,7C:2F:80:99:DE:70,-95\n" +
                "85,3,7C:2F:80:99:DE:25,-86\n" +
                "85,3,7C:2F:80:99:DE:B1,-82\n" +
                "85,3,7C:2F:80:99:DE:70,-95\n" +
                "86,3,7C:2F:80:99:DE:25,-88\n" +
                "86,3,7C:2F:80:99:DE:B1,-74\n" +
                "87,3,7C:2F:80:99:DE:25,-88\n" +
                "87,3,7C:2F:80:99:DE:B1,-74\n" +
                "88,3,7C:2F:80:99:DE:25,-94\n" +
                "89,3,7C:2F:80:99:DE:25,-91\n" +
                "89,3,7C:2F:80:99:DE:B1,-83\n" +
                "90,3,7C:2F:80:99:DE:25,-97\n" +
                "90,3,7C:2F:80:99:DE:B1,-87\n" +
                "90,3,7C:2F:80:99:DE:70,-98\n" +
                "91,3,7C:2F:80:99:DE:25,-94\n" +
                "91,3,7C:2F:80:99:DE:B1,-88\n" +
                "91,3,7C:2F:80:99:DE:70,-96\n" +
                "92,3,7C:2F:80:99:DE:25,-94\n" +
                "92,3,7C:2F:80:99:DE:B1,-88\n" +
                "92,3,7C:2F:80:99:DE:70,-96\n" +
                "93,3,7C:2F:80:99:DE:88,-97\n" +
                "93,3,7C:2F:80:99:DE:25,-102\n" +
                "93,3,7C:2F:80:99:DE:B1,-90\n" +
                "93,3,7C:2F:80:99:DE:70,-95\n" +
                "93,3,7C:2F:80:99:DE:CD,-99\n" +
                "94,3,7C:2F:80:99:DE:88,-97\n" +
                "94,3,7C:2F:80:99:DE:25,-98\n" +
                "94,3,7C:2F:80:99:DE:B1,-95\n" +
                "94,3,7C:2F:80:99:DE:70,-95\n" +
                "95,3,7C:2F:80:99:DE:25,-91\n" +
                "95,3,7C:2F:80:99:DE:B1,-86\n" +
                "95,3,7C:2F:80:99:DE:CD,-88\n" +
                "96,3,7C:2F:80:99:DE:88,-93\n" +
                "96,3,7C:2F:80:99:DE:25,-95\n" +
                "96,3,7C:2F:80:99:DE:B1,-85\n" +
                "96,3,7C:2F:80:99:DE:70,-87\n" +
                "96,3,7C:2F:80:99:DE:CD,-88\n" +
                "97,3,7C:2F:80:99:DE:88,-93\n" +
                "97,3,7C:2F:80:99:DE:25,-95\n" +
                "97,3,7C:2F:80:99:DE:B1,-77\n" +
                "98,3,7C:2F:80:99:DE:B1,-77\n" +
                "98,3,7C:2F:80:99:DE:70,-91\n" +
                "98,3,7C:2F:80:99:DE:CD,-97\n" +
                "99,3,7C:2F:80:99:DE:B1,-93\n" +
                "99,3,7C:2F:80:99:DE:70,-91\n" +
                "99,3,7C:2F:80:99:DE:CD,-97\n" +
                "100,3,7C:2F:80:99:DE:B1,-88\n" +
                "100,3,7C:2F:80:99:DE:CD,-97\n" +
                "101,3,7C:2F:80:99:DE:B1,-83\n" +
                "102,3,7C:2F:80:99:DE:25,-95\n" +
                "102,3,7C:2F:80:99:DE:B1,-82\n" +
                "102,3,7C:2F:80:99:DE:70,-100\n" +
                "103,3,7C:2F:80:99:DE:25,-95\n" +
                "103,3,7C:2F:80:99:DE:B1,-82\n" +
                "103,3,7C:2F:80:99:DE:70,-100\n" +
                "104,3,7C:2F:80:99:DE:B1,-82\n" +
                "104,3,7C:2F:80:99:DE:70,-98\n" +
                "105,3,7C:2F:80:99:DE:25,-84\n" +
                "105,3,7C:2F:80:99:DE:70,-98\n" +
                "106,2,7C:2F:80:99:DE:88,-95\n" +
                "106,2,7C:2F:80:99:DE:B1,-93\n" +
                "106,2,7C:2F:80:99:DE:70,-94\n" +
                "106,2,7C:2F:80:99:DE:CD,-95\n" +
                "107,2,7C:2F:80:99:DE:88,-97\n" +
                "107,2,7C:2F:80:99:DE:25,-94\n" +
                "107,2,7C:2F:80:99:DE:B1,-93\n" +
                "107,2,7C:2F:80:99:DE:70,-94\n" +
                "107,2,7C:2F:80:99:DE:CD,-95\n" +
                "108,2,7C:2F:80:99:DE:88,-97\n" +
                "108,2,7C:2F:80:99:DE:B1,-87\n" +
                "109,2,7C:2F:80:99:DE:88,-97\n" +
                "109,2,7C:2F:80:99:DE:25,-99\n" +
                "109,2,7C:2F:80:99:DE:B1,-83\n" +
                "109,2,7C:2F:80:99:DE:70,-94\n" +
                "110,2,7C:2F:80:99:DE:88,-94\n" +
                "110,2,7C:2F:80:99:DE:25,-99\n" +
                "110,2,7C:2F:80:99:DE:B1,-85\n" +
                "110,2,7C:2F:80:99:DE:70,-98\n" +
                "110,2,7C:2F:80:99:DE:CD,-93\n" +
                "111,2,7C:2F:80:99:DE:88,-94\n" +
                "111,2,7C:2F:80:99:DE:25,-99\n" +
                "111,2,7C:2F:80:99:DE:B1,-91\n" +
                "111,2,7C:2F:80:99:DE:70,-91\n" +
                "112,2,7C:2F:80:99:DE:25,-99\n" +
                "112,2,7C:2F:80:99:DE:B1,-91\n" +
                "112,2,7C:2F:80:99:DE:70,-91\n" +
                "113,2,7C:2F:80:99:DE:70,-89\n" +
                "113,2,7C:2F:80:99:DE:CD,-89\n" +
                "114,2,7C:2F:80:99:DE:B1,-99\n" +
                "114,2,7C:2F:80:99:DE:70,-84\n" +
                "114,2,7C:2F:80:99:DE:CD,-89\n" +
                "115,2,7C:2F:80:99:DE:B1,-99\n" +
                "115,2,7C:2F:80:99:DE:70,-91\n" +
                "115,2,7C:2F:80:99:DE:CD,-100\n" +
                "116,2,7C:2F:80:99:DE:70,-88\n" +
                "116,2,7C:2F:80:99:DE:CD,-85\n" +
                "117,2,7C:2F:80:99:DE:70,-83\n" +
                "117,2,7C:2F:80:99:DE:CD,-93\n" +
                "118,2,7C:2F:80:99:DE:70,-86\n" +
                "118,2,7C:2F:80:99:DE:CD,-93\n" +
                "119,2,7C:2F:80:99:DE:70,-84\n" +
                "119,2,7C:2F:80:99:DE:CD,-90\n" +
                "120,2,7C:2F:80:99:DE:70,-86\n" +
                "120,2,7C:2F:80:99:DE:CD,-84\n" +
                "121,2,7C:2F:80:99:DE:70,-91\n" +
                "121,2,7C:2F:80:99:DE:CD,-93\n" +
                "122,2,7C:2F:80:99:DE:70,-98\n" +
                "122,2,7C:2F:80:99:DE:CD,-97\n" +
                "123,2,7C:2F:80:99:DE:70,-92\n" +
                "123,2,7C:2F:80:99:DE:CD,-97\n" +
                "124,2,7C:2F:80:99:DE:70,-92\n" +
                "124,2,7C:2F:80:99:DE:CD,-99\n" +
                "125,2,7C:2F:80:99:DE:CD,-99\n" +
                "126,2,7C:2F:80:99:DE:70,-88\n" +
                "127,2,7C:2F:80:99:DE:70,-89\n" +
                "128,2,7C:2F:80:99:DE:70,-90\n" +
                "129,2,7C:2F:80:99:DE:70,-89\n" +
                "129,2,7C:2F:80:99:DE:CD,-89\n" +
                "130,2,7C:2F:80:99:DE:70,-94\n" +
                "130,2,7C:2F:80:99:DE:CD,-89\n" +
                "131,2,7C:2F:80:99:DE:70,-94\n" +
                "132,2,7C:2F:80:99:DE:70,-93\n" +
                "132,2,7C:2F:80:99:DE:CD,-97\n" +
                "133,2,7C:2F:80:99:DE:70,-96\n" +
                "133,2,7C:2F:80:99:DE:CD,-97\n" +
                "134,2,7C:2F:80:99:DE:70,-96\n" +
                "134,2,7C:2F:80:99:DE:CD,-86\n" +
                "135,2,7C:2F:80:99:DE:70,-90\n" +
                "135,2,7C:2F:80:99:DE:CD,-86\n" +
                "136,2,7C:2F:80:99:DE:70,-85\n" +
                "136,2,7C:2F:80:99:DE:CD,-84\n" +
                "137,2,7C:2F:80:99:DE:88,-98\n" +
                "137,2,7C:2F:80:99:DE:70,-87\n" +
                "137,2,7C:2F:80:99:DE:CD,-87\n" +
                "138,2,7C:2F:80:99:DE:88,-98\n" +
                "138,2,7C:2F:80:99:DE:70,-100\n" +
                "138,2,7C:2F:80:99:DE:CD,-89\n" +
                "139,2,7C:2F:80:99:DE:88,-98\n" +
                "139,2,7C:2F:80:99:DE:70,-95\n" +
                "139,2,7C:2F:80:99:DE:CD,-89\n" +
                "140,2,7C:2F:80:99:DE:88,-98\n" +
                "140,2,7C:2F:80:99:DE:70,-95\n" +
                "141,2,7C:2F:80:99:DE:70,-94\n" +
                "141,2,7C:2F:80:99:DE:CD,-89\n" +
                "142,2,7C:2F:80:99:DE:25,-93\n" +
                "142,2,7C:2F:80:99:DE:70,-93\n" +
                "142,2,7C:2F:80:99:DE:CD,-93\n" +
                "143,2,7C:2F:80:99:DE:25,-93\n" +
                "143,2,7C:2F:80:99:DE:70,-93\n" +
                "144,2,7C:2F:80:99:DE:70,-91\n" +
                "144,2,7C:2F:80:99:DE:CD,-91\n" +
                "145,2,7C:2F:80:99:DE:88,-91\n" +
                "145,2,7C:2F:80:99:DE:CD,-91\n" +
                "146,2,7C:2F:80:99:DE:88,-91\n" +
                "146,2,7C:2F:80:99:DE:CD,-91\n" +
                "147,2,7C:2F:80:99:DE:88,-91\n" +
                "147,2,7C:2F:80:99:DE:25,-94\n" +
                "147,2,7C:2F:80:99:DE:CD,-98\n" +
                "148,2,7C:2F:80:99:DE:88,-89\n" +
                "148,2,7C:2F:80:99:DE:25,-94\n" +
                "148,2,7C:2F:80:99:DE:CD,-98\n" +
                "149,2,7C:2F:80:99:DE:88,-89\n" +
                "149,2,7C:2F:80:99:DE:25,-94\n" +
                "149,2,7C:2F:80:99:DE:CD,-98\n" +
                "150,2,7C:2F:80:99:DE:88,-89\n" +
                "150,2,7C:2F:80:99:DE:25,-94\n" +
                "150,2,7C:2F:80:99:DE:CD,-98\n" +
                "151,2,7C:2F:80:99:DE:88,-92\n" +
                "151,2,7C:2F:80:99:DE:25,-94\n" +
                "151,2,7C:2F:80:99:DE:B1,-89\n" +
                "151,2,7C:2F:80:99:DE:CD,-93\n" +
                "152,2,7C:2F:80:99:DE:88,-85\n" +
                "152,2,7C:2F:80:99:DE:CD,-93\n" +
                "153,2,7C:2F:80:99:DE:88,-89\n" +
                "153,2,7C:2F:80:99:DE:B1,-85\n" +
                "154,2,7C:2F:80:99:DE:B1,-86\n" +
                "155,2,7C:2F:80:99:DE:B1,-86\n" +
                "156,2,7C:2F:80:99:DE:B1,-99\n" +
                "157,2,7C:2F:80:99:DE:88,-97\n" +
                "157,2,7C:2F:80:99:DE:B1,-92\n" +
                "157,2,7C:2F:80:99:DE:70,-91\n" +
                "158,2,7C:2F:80:99:DE:88,-94\n" +
                "158,2,7C:2F:80:99:DE:B1,-90\n" +
                "158,2,7C:2F:80:99:DE:CD,-88\n" +
                "159,2,7C:2F:80:99:DE:88,-94\n" +
                "159,2,7C:2F:80:99:DE:B1,-90\n" +
                "159,2,7C:2F:80:99:DE:CD,-87\n" +
                "160,2,7C:2F:80:99:DE:CD,-87\n" +
                "161,2,7C:2F:80:99:DE:CD,-87\n" +
                "162,2,7C:2F:80:99:DE:70,-90\n" +
                "162,2,7C:2F:80:99:DE:CD,-85\n" +
                "163,2,7C:2F:80:99:DE:70,-93\n" +
                "163,2,7C:2F:80:99:DE:CD,-85\n" +
                "164,2,7C:2F:80:99:DE:70,-97\n" +
                "164,2,7C:2F:80:99:DE:CD,-84\n" +
                "165,2,7C:2F:80:99:DE:70,-93\n" +
                "165,2,7C:2F:80:99:DE:CD,-83\n" +
                "166,2,7C:2F:80:99:DE:70,-85\n" +
                "166,2,7C:2F:80:99:DE:CD,-83\n" +
                "167,2,7C:2F:80:99:DE:70,-88\n" +
                "167,2,7C:2F:80:99:DE:CD,-97\n" +
                "168,2,7C:2F:80:99:DE:70,-91\n" +
                "168,2,7C:2F:80:99:DE:CD,-92\n" +
                "169,2,7C:2F:80:99:DE:CD,-92\n" +
                "170,2,7C:2F:80:99:DE:CD,-92\n" +
                "171,2,7C:2F:80:99:DE:70,-95\n" +
                "172,2,7C:2F:80:99:DE:70,-95\n" +
                "173,2,7C:2F:80:99:DE:CD,-97\n" +
                "174,2,7C:2F:80:99:DE:CD,-94\n" +
                "175,2,7C:2F:80:99:DE:70,-104\n" +
                "175,2,7C:2F:80:99:DE:CD,-94\n" +
                "176,2,7C:2F:80:99:DE:70,-92\n" +
                "176,2,7C:2F:80:99:DE:CD,-94\n" +
                "177,2,7C:2F:80:99:DE:CD,-94\n" +
                "178,2,7C:2F:80:99:DE:70,-95\n" +
                "179,2,7C:2F:80:99:DE:70,-92\n" +
                "179,2,7C:2F:80:99:DE:CD,-92\n" +
                "180,2,7C:2F:80:99:DE:70,-92\n" +
                "180,2,7C:2F:80:99:DE:CD,-92\n" +
                "181,2,7C:2F:80:99:DE:70,-86\n" +
                "181,2,7C:2F:80:99:DE:CD,-82\n" +
                "182,2,7C:2F:80:99:DE:70,-87\n" +
                "182,2,7C:2F:80:99:DE:CD,-82\n" +
                "183,2,7C:2F:80:99:DE:88,-98\n" +
                "183,2,7C:2F:80:99:DE:70,-91\n" +
                "184,2,7C:2F:80:99:DE:88,-98\n" +
                "184,2,7C:2F:80:99:DE:B1,-99\n" +
                "184,2,7C:2F:80:99:DE:70,-80\n" +
                "184,2,7C:2F:80:99:DE:CD,-95\n" +
                "185,2,7C:2F:80:99:DE:B1,-99\n" +
                "185,2,7C:2F:80:99:DE:70,-80\n" +
                "185,2,7C:2F:80:99:DE:CD,-97\n" +
                "186,2,7C:2F:80:99:DE:88,-100\n" +
                "186,2,7C:2F:80:99:DE:B1,-96\n" +
                "186,2,7C:2F:80:99:DE:CD,-97\n" +
                "187,2,7C:2F:80:99:DE:88,-100\n" +
                "187,2,7C:2F:80:99:DE:B1,-98\n" +
                "188,2,7C:2F:80:99:DE:B1,-98\n" +
                "188,2,7C:2F:80:99:DE:CD,-95\n" +
                "189,2,7C:2F:80:99:DE:88,-93\n" +
                "189,2,7C:2F:80:99:DE:CD,-95\n" +
                "190,2,7C:2F:80:99:DE:88,-93\n" +
                "191,2,7C:2F:80:99:DE:88,-91\n" +
                "191,2,7C:2F:80:99:DE:70,-89\n" +
                "192,2,7C:2F:80:99:DE:88,-97\n" +
                "192,2,7C:2F:80:99:DE:70,-89\n" +
                "193,2,7C:2F:80:99:DE:88,-88\n" +
                "193,2,7C:2F:80:99:DE:25,-89\n" +
                "193,2,7C:2F:80:99:DE:70,-96\n" +
                "193,2,7C:2F:80:99:DE:CD,-90\n" +
                "194,2,7C:2F:80:99:DE:88,-84\n" +
                "194,2,7C:2F:80:99:DE:25,-96\n" +
                "194,2,7C:2F:80:99:DE:B1,-90\n" +
                "194,2,7C:2F:80:99:DE:70,-96\n" +
                "194,2,7C:2F:80:99:DE:CD,-94\n" +
                "195,2,7C:2F:80:99:DE:88,-90\n" +
                "195,2,7C:2F:80:99:DE:25,-96\n" +
                "195,2,7C:2F:80:99:DE:B1,-90\n" +
                "195,2,7C:2F:80:99:DE:70,-98\n" +
                "196,2,7C:2F:80:99:DE:88,-90\n" +
                "196,2,7C:2F:80:99:DE:B1,-95\n" +
                "196,2,7C:2F:80:99:DE:70,-97\n" +
                "196,2,7C:2F:80:99:DE:CD,-94\n" +
                "197,2,7C:2F:80:99:DE:25,-94\n" +
                "197,2,7C:2F:80:99:DE:B1,-95\n" +
                "197,2,7C:2F:80:99:DE:70,-97\n" +
                "197,2,7C:2F:80:99:DE:CD,-94\n" +
                "198,2,7C:2F:80:99:DE:25,-94\n" +
                "198,2,7C:2F:80:99:DE:B1,-92\n" +
                "198,2,7C:2F:80:99:DE:70,-89\n" +
                "199,2,7C:2F:80:99:DE:B1,-92\n" +
                "199,2,7C:2F:80:99:DE:70,-89\n" +
                "200,2,7C:2F:80:99:DE:25,-95\n" +
                "200,2,7C:2F:80:99:DE:B1,-92\n" +
                "200,2,7C:2F:80:99:DE:70,-88\n" +
                "201,2,7C:2F:80:99:DE:25,-95\n" +
                "201,2,7C:2F:80:99:DE:70,-82\n" +
                "202,2,7C:2F:80:99:DE:70,-92\n" +
                "203,2,7C:2F:80:99:DE:70,-84\n" +
                "203,2,7C:2F:80:99:DE:CD,-89\n" +
                "204,2,7C:2F:80:99:DE:70,-85\n" +
                "204,2,7C:2F:80:99:DE:CD,-89\n" +
                "205,2,7C:2F:80:99:DE:70,-87\n" +
                "205,2,7C:2F:80:99:DE:CD,-87\n" +
                "206,2,7C:2F:80:99:DE:70,-87\n" +
                "206,2,7C:2F:80:99:DE:CD,-89\n" +
                "207,2,7C:2F:80:99:DE:70,-87\n" +
                "207,2,7C:2F:80:99:DE:CD,-83\n" +
                "208,2,7C:2F:80:99:DE:70,-91\n" +
                "208,2,7C:2F:80:99:DE:CD,-83\n" +
                "209,2,7C:2F:80:99:DE:CD,-95\n" +
                "210,1,7C:2F:80:99:DE:70,-96\n" +
                "210,1,7C:2F:80:99:DE:CD,-80\n" +
                "211,1,7C:2F:80:99:DE:70,-91\n" +
                "211,1,7C:2F:80:99:DE:CD,-80\n" +
                "212,1,7C:2F:80:99:DE:70,-85\n" +
                "212,1,7C:2F:80:99:DE:CD,-88\n" +
                "213,1,7C:2F:80:99:DE:70,-94\n" +
                "213,1,7C:2F:80:99:DE:CD,-88\n" +
                "214,1,7C:2F:80:99:DE:70,-88\n" +
                "214,1,7C:2F:80:99:DE:CD,-87\n" +
                "215,1,7C:2F:80:99:DE:70,-92\n" +
                "215,1,7C:2F:80:99:DE:CD,-83\n" +
                "216,1,7C:2F:80:99:DE:70,-92\n" +
                "216,1,7C:2F:80:99:DE:CD,-80\n" +
                "217,1,7C:2F:80:99:DE:70,-73\n" +
                "217,1,7C:2F:80:99:DE:CD,-75\n" +
                "218,1,7C:2F:80:99:DE:70,-73\n" +
                "218,1,7C:2F:80:99:DE:CD,-79\n" +
                "219,1,7C:2F:80:99:DE:70,-82\n" +
                "219,1,7C:2F:80:99:DE:CD,-74\n" +
                "220,1,7C:2F:80:99:DE:70,-79\n" +
                "220,1,7C:2F:80:99:DE:CD,-77\n" +
                "221,1,7C:2F:80:99:DE:70,-79\n" +
                "221,1,7C:2F:80:99:DE:CD,-74\n" +
                "222,1,7C:2F:80:99:DE:70,-77\n" +
                "222,1,7C:2F:80:99:DE:CD,-82\n" +
                "223,1,7C:2F:80:99:DE:70,-78\n" +
                "223,1,7C:2F:80:99:DE:CD,-75\n" +
                "224,1,7C:2F:80:99:DE:70,-79\n" +
                "224,1,7C:2F:80:99:DE:CD,-73\n" +
                "225,1,7C:2F:80:99:DE:70,-83\n" +
                "225,1,7C:2F:80:99:DE:CD,-76\n" +
                "226,1,7C:2F:80:99:DE:70,-81\n" +
                "226,1,7C:2F:80:99:DE:CD,-79\n" +
                "227,1,7C:2F:80:99:DE:70,-83\n" +
                "227,1,7C:2F:80:99:DE:CD,-72\n" +
                "228,1,7C:2F:80:99:DE:70,-79\n" +
                "228,1,7C:2F:80:99:DE:CD,-72\n" +
                "229,1,7C:2F:80:99:DE:70,-74\n" +
                "229,1,7C:2F:80:99:DE:CD,-90\n" +
                "230,1,7C:2F:80:99:DE:70,-74\n" +
                "230,1,7C:2F:80:99:DE:CD,-88\n" +
                "231,1,7C:2F:80:99:DE:70,-86\n" +
                "231,1,7C:2F:80:99:DE:CD,-85\n" +
                "232,1,7C:2F:80:99:DE:70,-74\n" +
                "232,1,7C:2F:80:99:DE:CD,-85\n" +
                "233,1,7C:2F:80:99:DE:70,-74\n" +
                "233,1,7C:2F:80:99:DE:CD,-80\n" +
                "234,1,7C:2F:80:99:DE:70,-86\n" +
                "234,1,7C:2F:80:99:DE:CD,-88\n" +
                "235,1,7C:2F:80:99:DE:70,-88\n" +
                "235,1,7C:2F:80:99:DE:CD,-68\n" +
                "236,1,7C:2F:80:99:DE:70,-79\n" +
                "236,1,7C:2F:80:99:DE:CD,-75\n" +
                "237,1,7C:2F:80:99:DE:70,-77\n" +
                "237,1,7C:2F:80:99:DE:CD,-85\n" +
                "238,1,7C:2F:80:99:DE:70,-95\n" +
                "238,1,7C:2F:80:99:DE:CD,-75\n" +
                "239,1,7C:2F:80:99:DE:70,-95\n" +
                "239,1,7C:2F:80:99:DE:CD,-75\n" +
                "240,1,7C:2F:80:99:DE:70,-85\n" +
                "240,1,7C:2F:80:99:DE:CD,-75\n" +
                "241,1,7C:2F:80:99:DE:70,-88\n" +
                "241,1,7C:2F:80:99:DE:CD,-78\n" +
                "242,1,7C:2F:80:99:DE:70,-89\n" +
                "242,1,7C:2F:80:99:DE:CD,-84\n" +
                "243,1,7C:2F:80:99:DE:70,-83\n" +
                "243,1,7C:2F:80:99:DE:CD,-79\n" +
                "244,1,7C:2F:80:99:DE:70,-83\n" +
                "244,1,7C:2F:80:99:DE:CD,-77\n" +
                "245,1,7C:2F:80:99:DE:70,-83\n" +
                "245,1,7C:2F:80:99:DE:CD,-84\n" +
                "246,1,7C:2F:80:99:DE:70,-78\n" +
                "246,1,7C:2F:80:99:DE:CD,-82\n" +
                "247,1,7C:2F:80:99:DE:70,-78\n" +
                "247,1,7C:2F:80:99:DE:CD,-79\n" +
                "248,1,7C:2F:80:99:DE:70,-81\n" +
                "248,1,7C:2F:80:99:DE:CD,-83\n" +
                "249,1,7C:2F:80:99:DE:70,-82\n" +
                "249,1,7C:2F:80:99:DE:CD,-96\n" +
                "250,1,7C:2F:80:99:DE:70,-80\n" +
                "250,1,7C:2F:80:99:DE:CD,-89\n" +
                "251,1,7C:2F:80:99:DE:88,-102\n" +
                "251,1,7C:2F:80:99:DE:70,-80\n" +
                "251,1,7C:2F:80:99:DE:CD,-85\n" +
                "252,1,7C:2F:80:99:DE:88,-102\n" +
                "252,1,7C:2F:80:99:DE:25,-99\n" +
                "252,1,7C:2F:80:99:DE:70,-77\n" +
                "252,1,7C:2F:80:99:DE:CD,-87\n" +
                "253,1,7C:2F:80:99:DE:25,-99\n" +
                "253,1,7C:2F:80:99:DE:70,-80\n" +
                "253,1,7C:2F:80:99:DE:CD,-74\n" +
                "254,1,7C:2F:80:99:DE:70,-66\n" +
                "254,1,7C:2F:80:99:DE:CD,-72\n" +
                "255,1,7C:2F:80:99:DE:70,-71\n" +
                "255,1,7C:2F:80:99:DE:CD,-76\n" +
                "256,1,7C:2F:80:99:DE:70,-75\n" +
                "256,1,7C:2F:80:99:DE:CD,-76\n" +
                "257,1,7C:2F:80:99:DE:70,-80\n" +
                "257,1,7C:2F:80:99:DE:CD,-73\n" +
                "258,1,7C:2F:80:99:DE:B1,-98\n" +
                "258,1,7C:2F:80:99:DE:70,-71\n" +
                "258,1,7C:2F:80:99:DE:CD,-68\n" +
                "259,1,7C:2F:80:99:DE:B1,-98\n" +
                "259,1,7C:2F:80:99:DE:70,-77\n" +
                "259,1,7C:2F:80:99:DE:CD,-72\n" +
                "260,1,7C:2F:80:99:DE:70,-77\n" +
                "260,1,7C:2F:80:99:DE:CD,-76\n" +
                "261,1,7C:2F:80:99:DE:CD,-76\n" +
                "262,1,7C:2F:80:99:DE:CD,-74\n" +
                "263,1,7C:2F:80:99:DE:70,-74\n" +
                "263,1,7C:2F:80:99:DE:CD,-77\n" +
                "264,1,7C:2F:80:99:DE:70,-82\n" +
                "264,1,7C:2F:80:99:DE:CD,-71\n" +
                "265,1,7C:2F:80:99:DE:70,-75\n" +
                "265,1,7C:2F:80:99:DE:CD,-75\n" +
                "266,1,7C:2F:80:99:DE:70,-77\n" +
                "266,1,7C:2F:80:99:DE:CD,-75\n" +
                "267,1,7C:2F:80:99:DE:70,-72\n" +
                "267,1,7C:2F:80:99:DE:CD,-79\n" +
                "268,1,7C:2F:80:99:DE:70,-77\n" +
                "268,1,7C:2F:80:99:DE:CD,-94\n" +
                "269,1,7C:2F:80:99:DE:70,-79\n" +
                "269,1,7C:2F:80:99:DE:CD,-77\n" +
                "270,1,7C:2F:80:99:DE:70,-67\n" +
                "270,1,7C:2F:80:99:DE:CD,-78\n" +
                "271,1,7C:2F:80:99:DE:70,-72\n" +
                "271,1,7C:2F:80:99:DE:CD,-77\n" +
                "272,1,7C:2F:80:99:DE:70,-89\n" +
                "272,1,7C:2F:80:99:DE:CD,-75\n" +
                "273,1,7C:2F:80:99:DE:70,-77\n" +
                "273,1,7C:2F:80:99:DE:CD,-73\n" +
                "274,1,7C:2F:80:99:DE:70,-78\n" +
                "274,1,7C:2F:80:99:DE:CD,-73\n" +
                "275,1,7C:2F:80:99:DE:70,-76\n" +
                "275,1,7C:2F:80:99:DE:CD,-74\n" +
                "276,1,7C:2F:80:99:DE:25,-97\n" +
                "276,1,7C:2F:80:99:DE:70,-76\n" +
                "276,1,7C:2F:80:99:DE:CD,-73\n" +
                "277,1,7C:2F:80:99:DE:25,-96\n" +
                "277,1,7C:2F:80:99:DE:70,-90\n" +
                "277,1,7C:2F:80:99:DE:CD,-72\n" +
                "278,1,7C:2F:80:99:DE:25,-96\n" +
                "278,1,7C:2F:80:99:DE:70,-85\n" +
                "278,1,7C:2F:80:99:DE:CD,-71\n" +
                "279,1,7C:2F:80:99:DE:25,-96\n" +
                "279,1,7C:2F:80:99:DE:70,-78\n" +
                "279,1,7C:2F:80:99:DE:CD,-72\n" +
                "280,1,7C:2F:80:99:DE:25,-95\n" +
                "280,1,7C:2F:80:99:DE:70,-80\n" +
                "280,1,7C:2F:80:99:DE:CD,-78\n" +
                "281,1,7C:2F:80:99:DE:70,-75\n" +
                "281,1,7C:2F:80:99:DE:CD,-76\n" +
                "282,1,7C:2F:80:99:DE:70,-67\n" +
                "282,1,7C:2F:80:99:DE:CD,-79\n" +
                "283,1,7C:2F:80:99:DE:70,-78\n" +
                "283,1,7C:2F:80:99:DE:CD,-79\n" +
                "284,1,7C:2F:80:99:DE:70,-77\n" +
                "284,1,7C:2F:80:99:DE:CD,-70\n" +
                "285,1,7C:2F:80:99:DE:70,-85\n" +
                "286,1,7C:2F:80:99:DE:70,-72\n" +
                "286,1,7C:2F:80:99:DE:CD,-71\n" +
                "287,1,7C:2F:80:99:DE:70,-78\n" +
                "287,1,7C:2F:80:99:DE:CD,-80\n" +
                "288,1,7C:2F:80:99:DE:70,-75\n" +
                "288,1,7C:2F:80:99:DE:CD,-80\n" +
                "289,1,7C:2F:80:99:DE:70,-79\n" +
                "290,1,7C:2F:80:99:DE:B1,-99\n" +
                "290,1,7C:2F:80:99:DE:70,-82\n" +
                "290,1,7C:2F:80:99:DE:CD,-65\n" +
                "291,1,7C:2F:80:99:DE:B1,-99\n" +
                "291,1,7C:2F:80:99:DE:70,-78\n" +
                "291,1,7C:2F:80:99:DE:CD,-72\n" +
                "292,1,7C:2F:80:99:DE:70,-80\n" +
                "292,1,7C:2F:80:99:DE:CD,-77\n" +
                "293,1,7C:2F:80:99:DE:70,-72\n" +
                "293,1,7C:2F:80:99:DE:CD,-64\n" +
                "294,1,7C:2F:80:99:DE:70,-84\n" +
                "294,1,7C:2F:80:99:DE:CD,-61\n" +
                "295,1,7C:2F:80:99:DE:70,-80\n" +
                "295,1,7C:2F:80:99:DE:CD,-71\n" +
                "296,1,7C:2F:80:99:DE:B1,-95\n" +
                "296,1,7C:2F:80:99:DE:70,-77\n" +
                "296,1,7C:2F:80:99:DE:CD,-68\n" +
                "297,1,7C:2F:80:99:DE:B1,-95\n" +
                "297,1,7C:2F:80:99:DE:70,-73\n" +
                "297,1,7C:2F:80:99:DE:CD,-72\n" +
                "298,1,7C:2F:80:99:DE:70,-79\n" +
                "298,1,7C:2F:80:99:DE:CD,-72\n" +
                "299,1,7C:2F:80:99:DE:70,-83\n" +
                "299,1,7C:2F:80:99:DE:CD,-71\n" +
                "300,1,7C:2F:80:99:DE:70,-78\n" +
                "300,1,7C:2F:80:99:DE:CD,-77\n" +
                "301,1,7C:2F:80:99:DE:70,-77\n" +
                "301,1,7C:2F:80:99:DE:CD,-76\n" +
                "302,1,7C:2F:80:99:DE:70,-80\n" +
                "302,1,7C:2F:80:99:DE:CD,-79\n" +
                "303,1,7C:2F:80:99:DE:70,-78\n" +
                "303,1,7C:2F:80:99:DE:CD,-79\n" +
                "304,1,7C:2F:80:99:DE:70,-76\n" +
                "304,1,7C:2F:80:99:DE:CD,-76\n" +
                "305,1,7C:2F:80:99:DE:70,-87\n" +
                "305,1,7C:2F:80:99:DE:CD,-79\n" +
                "306,1,7C:2F:80:99:DE:70,-82\n" +
                "306,1,7C:2F:80:99:DE:CD,-73\n" +
                "307,1,7C:2F:80:99:DE:70,-76\n" +
                "307,1,7C:2F:80:99:DE:CD,-79\n" +
                "308,1,7C:2F:80:99:DE:70,-79\n" +
                "308,1,7C:2F:80:99:DE:CD,-76\n" +
                "309,1,7C:2F:80:99:DE:70,-75\n" +
                "309,1,7C:2F:80:99:DE:CD,-79\n" +
                "310,1,7C:2F:80:99:DE:70,-75\n" +
                "310,1,7C:2F:80:99:DE:CD,-82\n" +
                "311,1,7C:2F:80:99:DE:70,-77\n" +
                "311,1,7C:2F:80:99:DE:CD,-84\n" +
                "312,1,7C:2F:80:99:DE:70,-76\n" +
                "312,1,7C:2F:80:99:DE:CD,-86\n" +
                "313,1,7C:2F:80:99:DE:25,-97\n" +
                "313,1,7C:2F:80:99:DE:70,-72\n" +
                "313,1,7C:2F:80:99:DE:CD,-80\n";
    }

    public static PredictionModel testPredictionModel() throws IOException, JSONException {
        String testData = getTestData();
        return getPredictionModelFor(testData);
    }

    public static PredictionModel getPredictionModelFor(String csvData) throws IOException, JSONException {
        URL url = new URL("http://87.106.16.104/cgi-bin/learn-scans.py");
        HttpURLConnection connection = (HttpURLConnection)url.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "text/csv; charset=utf-8");
        connection.setDoOutput(true);
        connection.setDoInput(true);

        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
        outputStream.writeUTF(csvData);
        outputStream.flush();
        outputStream.close();

        InputStream inputStream = connection.getInputStream();
        BufferedReader inputReader = new BufferedReader(new InputStreamReader(inputStream));
        String line;
        StringBuffer response = new StringBuffer();
        while ((line = inputReader.readLine()) != null) {
            response.append(line);
            response.append('\r');
        }
        inputReader.close();
        String responseString = response.toString();

        return parseJSON(responseString);
    }

    public static PredictionModel parseJSON(String jsonString) throws JSONException {
        PredictionModel result = new PredictionModel();

        JSONObject object = new JSONObject(jsonString);

        result.setAccuracy((float) object.getDouble("acc"));
        result.setMinRssi((float) object.getDouble("min_rssi"));
        result.setMaxRssi((float) object.getDouble("max_rssi"));

        JSONArray bArray = object.getJSONArray("b");
        float[] b = new float[bArray.length()];
        for (int i = 0; i < bArray.length(); ++i) {
            b[i] = (float)bArray.getDouble(i);
        }
        result.setB(b);

        JSONArray WArray = object.getJSONArray("W");
        int width = WArray.length();
        int height = WArray.getJSONArray(0).length();
        // TODO: PrÃ¼fen, wie rum die Daten in die Matrix sollen
        float[][] W = new float[height][width];
        for (int y = 0; y < height; ++y) {
            for (int x = 0; x < width; ++x) {
                W[y][x] = (float)WArray.getJSONArray(x).getDouble(y);
            }
        }
        result.setW(W);

        JSONObject roomsObject = object.getJSONObject("rooms");
        Iterator<String> roomKeys = roomsObject.keys();
        while(roomKeys.hasNext()) {
            String roomName = roomKeys.next();
            int roomIndex = roomsObject.getInt(roomName);
            result.getRooms().put(roomName, roomIndex);
        }

        JSONObject tagsObject = object.getJSONObject("tags");
        Iterator<String> tagKeys = tagsObject.keys();
        while(tagKeys.hasNext()) {
            String tagAddress = tagKeys.next();
            int tagIndex = tagsObject.getInt(tagAddress);
            result.getTags().put(tagAddress, tagIndex);
        }

        return result;
    }

    // Eingabe: Eine Messung aus n Paaren von Bluetooth-Adresse und Messwert
    // Ausgabe: Eine Vorhersage aus m Paaren von Raumname und W'keit
    public Map<String, Float> predict(Map<String, BeaconScan> scans) {
        // Eingabevektor x auf Basis der Scanwerte ermittlen und normalisieren
        float[] x = new float[tags.size()];
        for (String address : tags.keySet()) {
            BeaconScan scan = scans.get(address);
            if (scan != null) {
                Integer tagIndex = tags.get(address);
                float normalizedRssi = normalize(scan.getRssi());
                x[tagIndex] = normalizedRssi;
            }
        }

        float[] mulResult = multiply(W, x);
        float[] addResult = add(mulResult, b);
        float[] y = softmax(addResult);

        Map<String, Float> result = new HashMap<>();
        for (String room : rooms.keySet()) {
            Integer roomIndex = rooms.get(room);
            result.put(room, y[roomIndex]);
        }
        return result;
    }

    private float normalize(int rssi) {
        float rssiRange = maxRssi - minRssi;
        float rssiNormalizer = 1.0f / rssiRange;
        float normalized = rssiNormalizer * (rssi - minRssi);
        return normalized;
    }

    private float[] multiply(float[][] W, float[] x_) {
        int height = W.length;
        int width = W[0].length;

        float[] result = new float[height];

        for (int y = 0; y < height; ++y) {
            float sum = 0.0f;
            for (int x = 0; x < width; ++x) {
                sum += W[y][x] * x_[x];
            }
            result[y] = sum;
        }

        return result;
    }

    private float[] add(float[] a, float[] b) {
        float[] result = new float[a.length];
        for (int i = 0; i < a.length; ++i) {
            result[i] = a[i] + b[i];
        }
        return result;
    }

    private float[] softmax(float[] y) {
        float[] result = new float[y.length];

        float sum = 0.0f;
        for (int i = 0; i < y.length; ++i) {
            result[i] = (float) Math.exp(y[i]);
            sum += result[i];
        }
        float invSum = 1.0f / sum;
        for (int i = 0; i < y.length; ++i) {
            result[i] *= invSum;
        }
        return result;
    }

    public float getAccuracy() {
        return accuracy;
    }

    public float[][] getW() {
        return W;
    }

    public float[] getB() {
        return b;
    }

    public Map<String, Integer> getRooms() {
        return rooms;
    }

    public Map<String, Integer> getTags() {
        return tags;
    }

    public void setAccuracy(float accuracy) {
        this.accuracy = accuracy;
    }

    public void setW(float[][] w) {
        W = w;
    }

    public void setB(float[] b) {
        this.b = b;
    }

    public void setRooms(Map<String, Integer> rooms) {
        this.rooms = rooms;
    }

    public void setTags(Map<String, Integer> tags) {
        this.tags = tags;
    }

    public float getMinRssi() {
        return minRssi;
    }

    public void setMinRssi(float minRssi) {
        this.minRssi = minRssi;
    }

    public float getMaxRssi() {
        return maxRssi;
    }

    public void setMaxRssi(float maxRssi) {
        this.maxRssi = maxRssi;
    }
}
